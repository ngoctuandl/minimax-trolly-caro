{"version":3,"sources":["features/play-cell-picker/minimax.js","App.js","serviceWorker.js","index.js"],"names":["MAX_VALUE","MIN_VALUE","DRAW_VALUE","INFINITY","Infinity","WIN_GAME","LOSE_GAME","DRAW_GAME","UN_IDENTIFY_GAME","checkGameState","board","row","col","value","arguments","length","undefined","result","count","c","checkGameRowState","r","checkGameColState","i","checkingRow","checkingCol","checkGameCrossFromTopLeftState","checkGameCrossFromTopRightState","breakable","minimaxCellValue","moveRow","moveCol","isMaximizingPlayer","deep","playingValue","playingBoard","curBoard","Object","toConsumableArray","curRow","setBoardStatus","bestVal","Math","max","log","concat","min","pickCellByMiniMax","logs","splice","cellValue","setTimeout","printLogs","key","msg","push","console","window","from","to","filter","printedLogs","cellPadding","numOfCells","boardSize","innerWidth","innerHeight","padding","cellSize","endRowX","endColY","cellLineWidth","markLineWidth","drawBoard","context","beginPath","beginRow","endRow","beginCol","endCol","moveTo","lineTo","lineWidth","strokeStyle","stroke","cellPos","nextRow","nextCol","playX","_cellPos","drawX","playO","_pickCellByMiniMax","_cellPos2","arc","PI","drawO","drawContext","drawCanvas","gameDone","processMouseClick","canvas","event","_getMousePosition","rect","getBoundingClientRect","x","clientX","left","y","clientY","top","getMousePosition","_toCellPosition","parseInt","toCellPosition","getContext","checkCaroGameState","_playO","gameState","Swal","fire","title","text","imageUrl","imageWidth","imageAlt","animation","onClose","initBoard","clearRect","width","height","App","useRef","useEffect","ctx","current","react_default","a","createElement","ref","onClick","e","Boolean","location","hostname","match","ReactDOM","render","src_App","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.be4a296e.chunk.js","sourcesContent":["const MAX_VALUE = 10;\r\nconst MIN_VALUE = -10;\r\nconst DRAW_VALUE = 0;\r\nconst INFINITY = Infinity;\r\n\r\nexport const WIN_GAME = 1;\r\nexport const LOSE_GAME = -1;\r\nexport const DRAW_GAME = 0;\r\nexport const UN_IDENTIFY_GAME = 2;\r\n\r\nexport function checkGameRowState(board, row, col, value) {\r\n  let count = 0;\r\n  for (\r\n    let c = col - 3 > 0 ? col - 3 : 0;\r\n    c < col + 3 && c < board[row].length;\r\n    c++\r\n  ) {\r\n    if (board[row][c] === value) {\r\n      count++;\r\n      if (count === 3) {\r\n        return value > 0 ? WIN_GAME : LOSE_GAME;\r\n      }\r\n    } else {\r\n      count = 0;\r\n    }\r\n  }\r\n\r\n  return UN_IDENTIFY_GAME;\r\n}\r\n\r\nexport function checkGameColState(board, row, col, value) {\r\n  let count = 0;\r\n  for (\r\n    let r = row - 3 > 0 ? row - 3 : 0;\r\n    r < row + 3 && r < board.length;\r\n    r++\r\n  ) {\r\n    if (board[r][col] === value) {\r\n      count++;\r\n      if (count === 3) {\r\n        return value > 0 ? WIN_GAME : LOSE_GAME;\r\n      }\r\n    } else {\r\n      count = 0;\r\n    }\r\n  }\r\n\r\n  return UN_IDENTIFY_GAME;\r\n}\r\n\r\nexport function checkGameCrossFromTopLeftState(board, row, col, value) {\r\n  let count = 0;\r\n\r\n  for (let i = -3; i <= 3; i++) {\r\n    const checkingRow = row + i;\r\n    const checkingCol = col + i;\r\n    if (\r\n      checkingCol < 0 ||\r\n      checkingCol >= board[row].length ||\r\n      checkingRow < 0 ||\r\n      checkingRow >= board.length\r\n    ) {\r\n      continue;\r\n    }\r\n    if (board[checkingRow][checkingCol] === value) {\r\n      count++;\r\n      if (count === 3) {\r\n        return value > 0 ? WIN_GAME : LOSE_GAME;\r\n      }\r\n    } else {\r\n      count = 0;\r\n    }\r\n  }\r\n\r\n  return UN_IDENTIFY_GAME;\r\n}\r\n\r\nexport function checkGameCrossFromTopRightState(board, row, col, value) {\r\n  let count = 0;\r\n\r\n  for (let r = -3; r <= 3; r++) {\r\n    const checkingRow = row + r;\r\n    const checkingCol = col - r;\r\n    if (\r\n      checkingCol < 0 ||\r\n      checkingCol >= board[row].length ||\r\n      checkingRow < 0 ||\r\n      checkingRow >= board.length\r\n    ) {\r\n      continue;\r\n    }\r\n\r\n    if (board[checkingRow][checkingCol] === value) {\r\n      count++;\r\n      if (count === 3) {\r\n        return value > 0 ? WIN_GAME : LOSE_GAME;\r\n      }\r\n    } else {\r\n      count = 0;\r\n    }\r\n  }\r\n\r\n  return UN_IDENTIFY_GAME;\r\n}\r\n\r\nexport function checkGameState(board, row, col, value = -1) {\r\n  if (board[row][col] === 0) {\r\n    return UN_IDENTIFY_GAME;\r\n  }\r\n  let result = checkGameRowState(board, row, col, value);\r\n  if (result !== UN_IDENTIFY_GAME) {\r\n    return result;\r\n  }\r\n  result = checkGameColState(board, row, col, value);\r\n  if (result !== UN_IDENTIFY_GAME) {\r\n    return result;\r\n  }\r\n\r\n  result = checkGameCrossFromTopLeftState(board, row, col, value);\r\n  if (result !== UN_IDENTIFY_GAME) {\r\n    return result;\r\n  }\r\n\r\n  result = checkGameCrossFromTopRightState(board, row, col, value);\r\n  if (result !== UN_IDENTIFY_GAME) {\r\n    return result;\r\n  }\r\n\r\n  let breakable = false;\r\n  for (let r = 0; r < board.length; r++) {\r\n    for (let c = 0; c < board[r].length; c++) {\r\n      breakable = board[r][c] === 0;\r\n      if (breakable) {\r\n        break;\r\n      }\r\n    }\r\n    if (breakable) {\r\n      break;\r\n    }\r\n  }\r\n\r\n  if (!breakable) {\r\n    return DRAW_GAME;\r\n  }\r\n  return result;\r\n}\r\n\r\nfunction setBoardStatus(board, row, col, value) {\r\n  const curBoard = [...board];\r\n  const curRow = [...curBoard[row]];\r\n  curRow[col] = value;\r\n  curBoard[row] = curRow;\r\n\r\n  return curBoard;\r\n}\r\n\r\nfunction minimaxCellValue(board, moveRow, moveCol, isMaximizingPlayer, deep) {\r\n  const playingValue = isMaximizingPlayer ? 1 : -1;\r\n  const playingBoard = setBoardStatus(board, moveRow, moveCol, playingValue);\r\n\r\n  if (\r\n    checkGameState(playingBoard, moveRow, moveCol, playingValue) === WIN_GAME\r\n  ) {\r\n    return MAX_VALUE;\r\n  }\r\n  if (\r\n    checkGameState(playingBoard, moveRow, moveCol, playingValue) === LOSE_GAME\r\n  ) {\r\n    return MIN_VALUE;\r\n  }\r\n  if (\r\n    checkGameState(playingBoard, moveRow, moveCol, playingValue) === DRAW_GAME\r\n  ) {\r\n    return DRAW_VALUE;\r\n  }\r\n\r\n  if (isMaximizingPlayer) {\r\n    let bestVal = -INFINITY;\r\n    for (let r = 0; r < playingBoard.length; r++) {\r\n      for (let c = 0; c < playingBoard[r].length; c++) {\r\n        if (playingBoard[r][c] !== 0) {\r\n          continue;\r\n        }\r\n\r\n        const value = minimaxCellValue(playingBoard, r, c, false, deep + 1);\r\n\r\n        bestVal = Math.max(bestVal, value);\r\n        log(\r\n          \"de quy\",\r\n          `max {moveRow:${moveRow},moveCol:${moveCol}} {r:${r},c:${c}} value:${value} best:${bestVal}`\r\n        );\r\n      }\r\n    }\r\n    return bestVal;\r\n  } else {\r\n    let bestVal = +INFINITY;\r\n\r\n    for (let r = 0; r < playingBoard.length; r++) {\r\n      for (let c = 0; c < playingBoard[r].length; c++) {\r\n        if (playingBoard[r][c] !== 0) {\r\n          continue;\r\n        }\r\n        const value = minimaxCellValue(playingBoard, r, c, true, deep + 1);\r\n        bestVal = Math.min(bestVal, value);\r\n\r\n        log(\r\n          \"de quy\",\r\n          `min {moveRow:${moveRow},moveCol:${moveCol}} {r:${r},c:${c}} value:${value} best:${bestVal}`\r\n        );\r\n      }\r\n    }\r\n    return bestVal;\r\n  }\r\n}\r\n\r\nexport const pickCellByMiniMax = board => {\r\n  logs.splice(0, logs.length);\r\n\r\n  let col = 0,\r\n    row = 0;\r\n  let min = +INFINITY;\r\n  for (let r = 0; r < board.length; r++) {\r\n    for (let c = 0; c < board[r].length; c++) {\r\n      if (board[r][c] !== 0) {\r\n        continue;\r\n      }\r\n      const cellValue = minimaxCellValue(board, r, c, false, 0);\r\n      log(\"gia tri\", `cell[${r},${c}]=${cellValue}`);\r\n      if (cellValue < min) {\r\n        col = c;\r\n        row = r;\r\n        min = cellValue;\r\n      }\r\n    }\r\n  }\r\n\r\n  setTimeout(printLogs, 500);\r\n  return { row, col };\r\n};\r\n\r\nconst logs = [];\r\nfunction log(key, msg) {\r\n  logs.push({ key, msg });\r\n}\r\n\r\nfunction printLogs() {\r\n  console.log(logs.length);\r\n}\r\n\r\nwindow.printLogs = (from = 0, to = logs.length, filter = value => true) => {\r\n  let printedLogs = logs.filter(filter);\r\n  printedLogs = printedLogs.splice(from, to);\r\n\r\n  console.log(printedLogs);\r\n};\r\n","import React, { useRef, useEffect } from \"react\";\nimport Swal from \"sweetalert2\";\n\nimport {\n  pickCellByMiniMax,\n  checkGameState,\n  UN_IDENTIFY_GAME,\n  WIN_GAME,\n  LOSE_GAME,\n  DRAW_GAME\n} from \"./features\";\n\nconst cellPadding = 10.0;\nconst numOfCells = 3;\nlet board = [];\nconst boardSize = Math.min(window.innerWidth, window.innerHeight);\nconst padding = 5.0;\nconst cellSize = (boardSize - padding * 2) / numOfCells;\nconst endRowX = boardSize - padding * 2;\nconst endColY = boardSize - padding * 2;\nconst cellLineWidth = 1;\nconst markLineWidth = 6;\n\nfunction drawBoard(context) {\n  context.beginPath();\n\n  for (var i = 0; i <= numOfCells; i++) {\n    const row = i * cellSize + padding;\n    const beginRow = [padding, row > endColY ? endColY : row];\n    const endRow = [endRowX, row > endColY ? endColY : row];\n\n    const col = i * cellSize + padding;\n    const beginCol = [col > endRowX ? endRowX : col, padding];\n    const endCol = [col > endRowX ? endRowX : col, endColY];\n\n    context.moveTo(beginRow[0], beginRow[1]);\n    context.lineTo(endRow[0], endRow[1]);\n\n    context.moveTo(beginCol[0], beginCol[1]);\n    context.lineTo(endCol[0], endCol[1]);\n  }\n\n  context.lineWidth = cellLineWidth;\n  context.strokeStyle = \"black\";\n  context.stroke();\n}\n\nfunction getMousePosition(canvas, event) {\n  const rect = canvas.getBoundingClientRect();\n  const x = event.clientX - rect.left;\n  const y = event.clientY - rect.top;\n\n  return { x, y };\n}\n\nfunction toCellPosition(x, y) {\n  const col = parseInt((x - padding) / cellSize, 10);\n  const row = parseInt((y - padding) / cellSize, 10);\n\n  return { col, row };\n}\n\nfunction isPlayable(r, c) {\n  return board[r][c] === 0;\n}\n\nfunction cellPos(r, c) {\n  const row = r * cellSize + padding;\n  const nextRow = row + cellSize > endRowX ? endRowX : row + cellSize;\n\n  const col = c * cellSize + padding;\n  const nextCol = col + cellSize > endColY ? endColY : col + cellSize;\n\n  return { row, nextRow, col, nextCol };\n}\nfunction drawX(context, r, c) {\n  const { row, nextRow, col, nextCol } = cellPos(r, c);\n\n  context.beginPath();\n\n  context.moveTo(col + cellPadding, row + cellPadding);\n  context.lineTo(nextCol - cellPadding, nextRow - cellPadding);\n\n  context.moveTo(nextCol - cellPadding, row + cellPadding);\n  context.lineTo(col + cellPadding, nextRow - cellPadding);\n\n  context.lineWidth = markLineWidth;\n  context.strokeStyle = \"orange\";\n  context.stroke();\n}\n\nfunction playX(context, row, col) {\n  if (!isPlayable(row, col)) {\n    return false;\n  }\n\n  drawX(context, row, col);\n\n  board[row][col] = 1;\n  return true;\n}\n\nfunction drawO(context, r, c) {\n  const { row, col } = cellPos(r, c);\n  context.beginPath();\n  context.arc(\n    col + cellSize / 2,\n    row + cellSize / 2,\n    cellSize / 2 - cellPadding,\n    0,\n    2 * Math.PI\n  );\n\n  context.lineWidth = markLineWidth;\n  context.strokeStyle = \"green\";\n  context.stroke();\n}\n\nfunction playO(context) {\n  const { row, col } = pickCellByMiniMax(board);\n\n  drawO(context, row, col);\n\n  board[row][col] = -1;\n\n  return { row, col };\n}\n\nlet gameDone = false;\n\nfunction processMouseClick(canvas, event) {\n  if (gameDone) {\n    return;\n  }\n  const { x, y } = getMousePosition(canvas, event);\n  const { col, row } = toCellPosition(x, y);\n\n  if (row < 0 || row >= numOfCells || col < 0 || col >= numOfCells) {\n    return;\n  }\n\n  if (!playX(canvas.getContext(\"2d\"), row, col)) {\n    return;\n  }\n\n  if (checkCaroGameState(row, col, 1) !== UN_IDENTIFY_GAME) {\n    return;\n  }\n\n  const { row: rowO, col: colO } = playO(canvas.getContext(\"2d\"), row, col);\n\n  checkCaroGameState(rowO, colO, -1);\n}\n\nfunction checkCaroGameState(row, col, value) {\n  const gameState = checkGameState(board, row, col, value);\n\n  switch (gameState) {\n    case WIN_GAME:\n      Swal.fire({\n        title: \"Móa!\",\n        text: \"Dơơơơ...\",\n        imageUrl: \"/images/thua.png\",\n        imageWidth: 400,\n        imageAlt: \"Móa! Dơơơơ...\",\n        animation: true,\n        onClose: () => {\n          gameDone = false;\n          initBoard();\n          drawContext.clearRect(0, 0, drawCanvas.width, drawCanvas.height);\n          drawBoard(drawContext);\n        }\n      });\n      gameDone = true;\n      break;\n    case LOSE_GAME:\n      Swal.fire({\n        title: \"Thua chưa!\",\n        text: \"AI đấy...\",\n        imageUrl: \"/images/thang.gif\",\n        imageWidth: 400,\n        imageAlt: \"Thua chưa! AI đấy...\",\n        animation: true,\n        onClose: () => {\n          gameDone = false;\n          initBoard();\n          drawContext.clearRect(0, 0, drawCanvas.width, drawCanvas.height);\n          drawBoard(drawContext);\n        }\n      });\n\n      gameDone = true;\n      break;\n    case DRAW_GAME:\n      Swal.fire({\n        title: \"Hòa!\",\n        text: \"Hòa cái beep...\",\n        imageUrl: \"/images/hoa.png\",\n        imageWidth: 400,\n        imageAlt: \"Thua chưa! AI đấy...\",\n        animation: true,\n        onClose: () => {\n          gameDone = false;\n          initBoard();\n\n          drawContext.clearRect(0, 0, drawCanvas.width, drawCanvas.height);\n          drawBoard(drawContext);\n        }\n      });\n\n      gameDone = true;\n      break;\n    default:\n      break;\n  }\n\n  return gameState;\n}\n\nfunction initBoard() {\n  board = [];\n  for (var r = 0; r < numOfCells; r++) {\n    board[r] = [];\n    for (var c = 0; c < numOfCells; c++) {\n      board[r].push(0);\n    }\n  }\n}\nlet drawContext;\nlet drawCanvas;\n\nfunction App() {\n  const canvas = useRef(null);\n  useEffect(() => {\n    initBoard();\n\n    const ctx = canvas.current.getContext(\"2d\");\n    drawCanvas = canvas.current;\n    drawContext = ctx;\n    drawBoard(ctx);\n  });\n\n  return (\n    <canvas\n      width={boardSize}\n      height={boardSize}\n      ref={canvas}\n      onClick={e => {\n        processMouseClick(canvas.current, e);\n      }}\n    />\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}